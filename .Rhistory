data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
return(X)
}
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
)
trees_2010 <- trees_2010 %>%
mutate(BA.Larger.Trees.2(trees_2010))
View(BA.Larger.Trees.2)
View(BA.Larger.Trees.2)
View(BA.Larger.Trees.2)
BA.Larger.Trees.2 <- function(data) {
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
return(X)
}
BA.Larger.Trees.2 <- function(data) {
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
return(X)
}
trees_2010 <- trees_2010 %>%
mutate(BA.Larger.Trees.2(trees_2010))
Temp <- BA.Larger.Trees.2(trees_2010))
Temp <- BA.Larger.Trees.2(trees_2010)
BA.Larger.Trees.2 <- function(data) {
data %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
return(X)
}
Temp <- BA.Larger.Trees.2(trees_2010)
BA.Larger.Trees.2 <- function(Stand, Plot, Tree, DBH, BA) {
Temp <- tibble(Stand, Plot, Tree, DBH, BA)
Temp.Func <- function(data){
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
}
result <- Temp.Func(Temp)
return(result$x)
}
BA.Larger.Trees.2 <- function(Stand, Plot, Tree, DBH, BA) {
Temp <- tibble(Stand, Plot, Tree, DBH, BA)
Temp.Func <- function(data){
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
}
result <- Temp.Func(Temp)
return(result$x)
}
BA.Larger.Trees.2 <- function(Stand, Plot, Tree, DBH, BA) {
Temp <- tibble(Stand, Plot, Tree, DBH, BA)
Temp.Func <- function(data){
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
}
result <- Temp.Func(Temp)
return(result$x)
}
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
)
BA.Larger.Trees.2 <- function(Stand, Plot, Tree, DBH, BA) {
Temp <- tibble(Stand, Plot, Tree, DBH, BA)
Temp.Func <- function(data){
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
}
result <- Temp.Func(Temp)
return(result$x)
}
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
BAL = BA.Larger.Trees.2(STAND, PLOT, TREE, DBH, BA)
)
BA.Larger.Trees.2 <- function(Stand, Plot, Tree, DBH, BA) {
Temp <- tibble(Stand, Plot, Tree, DBH, BA)
Temp.Func <- function(data){
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
}
result <- Temp.Func(Temp)
print(result)
}
BAL = BA.Larger.Trees.2(STAND, PLOT, TREE, DBH, BA)
trees_2010 %>% BA.Larger.Trees.2(STAND, PLOT, TREE, DBH, BA)
BA.Larger.Trees.2 <- function(Stand, Plot, Tree, DBH, BA) {
Temp <- tibble(Stand, Plot, Tree, DBH, BA)
Temp.Func <- function(data){
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
}
result <- Temp.Func(Temp)
print(result)
}
trees_2010 %>% BA.Larger.Trees.2(STAND, PLOT, TREE, DBH, BA)
trees_2010 %>% BA.Larger.Trees.2(STAND, PLOT, TREE, DBH, BA
)
Temp.Func <- function(data){
data %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
}
result <- Temp.Func(Temp)
Temp <- trees_2010 %>% select(STAND, PLOT, TREE, DBH, BA)
result <- Temp.Func(Temp)
BA.Larger.Trees.3 <- function(trees_2010) {
data %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
}
Temp <- tibble(STAND, PLOT, TREE, DBH, BA)
Temp <- trees_2010 %>% tibble(STAND, PLOT, TREE, DBH, BA)
result <- trees_2010 %>% BA.Larger.Trees.3(trees_2010)
BA.Larger.Trees.3 <- function(data) {
data %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
}
result <- trees_2010 %>% BA.Larger.Trees.3(trees_2010)
BA.Larger.Trees.3 <- function(data()) {
data %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
}
BA.Larger.Trees.3 <- function(data) {
data %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
}
result <- trees_2010 %>% BA.Larger.Trees.3('trees_2010')
result$X
BA.Larger.Trees.3 <- function(mydata) {
data %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
}
result <- BA.Larger.Trees.3(trees_2010)
BA.Larger.Trees.3 <- function(mydata) {
mydata %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
}
result <- BA.Larger.Trees.3(trees_2010)
result$X
BA.Larger.Trees.3 <- function(mydata) {
mydata %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
return(mydata$X)
}
result <- BA.Larger.Trees.3(trees_2010)
BA.Larger.Trees.3 <- function(mydata) {
mydata %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
result <- BA.Larger.Trees.3(trees_2010)
result$X
}
BA.Larger.Trees.3 <- function(mydata) {
mydata %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
result <- BA.Larger.Trees.3(trees_2010)
return(result$X)
}
BA.Larger.Trees.3(trees_2010)
BA.Larger.Trees.3 <- function(mydata) {
result <- mydata %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
return(result$x)
}
BA.Larger.Trees.3(trees_2010)
BA.Larger.Trees.3 <- function(mydata) {
result <- mydata %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
return(result$x)
}
X <- BA.Larger.Trees.3(trees_2010)
BA.Larger.Trees <- function(mydata) {
mydata %>%
arrange(Stand, Plot, desc(BA)) %>%
group_by(Stand, Plot) %>%
mutate(X = cumsum(BA) - BA)
}
Temp <- tibble(Stand, Plot, Tree, DBH, BA)
View(Temp)
result <- BA.Larger.Trees(Temp)
result$X
BA.Larger.Trees <- function(mydata) {
mydata %>%
arrange(STAND, PLOT, desc(BA)) %>%
group_by(STAND, PLOT) %>%
mutate(X = cumsum(BA) - BA)
}
result <- BA.Larger.Trees(trees_2010)
result$X
trees_2010 <- trees_2010 %>% mutate(results = BA.Larger.Trees(trees_2010)) %>%
mutate(BAL = results$X)
View(trees_2010)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
)
trees_2010 <- trees_2010 %>%
group_by(STAND, PLOT) %>%
arrange(desc(DBH), .by_group = TRUE)
trees_2010 <- trees_2010 %>%
mutate(
BAL = BA.Larger.Trees(STAND, PLOT, DBH, BA)
)
View(trees_2010)
tree21 <- trees_2010 %>% filter(PLOT == c(11, 21, 22))
View(tree21)
View(trees)
View(tree21)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
ID = Unique.ID(STAND, PLOT),
)
trees_2010 <- trees_2010 %>%
group_by(ID) %>%
arrange(desc(DBH), .by_group = TRUE)
trees_2010 <- trees_2010 %>%
mutate(
BAL = BA.Larger.Trees(ID, DBH, BA),
)
library(inventoryfunctions)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
ID = Unique.ID(STAND, PLOT),
)
trees_2010 <- trees_2010 %>%
group_by(ID) %>%
arrange(desc(DBH), .by_group = TRUE)
trees_2010 <- trees_2010 %>%
mutate(
BAL = BA.Larger.Trees(ID, DBH, BA),
)
trees_2010 <- trees_2010 %>%
group_by(ID) %>%
arrange(desc(DBH), .by_group = TRUE)
trees_2010 <- trees_2010 %>%
mutate(
CCFL = CCF.Larger(ID, SP, DBH, EXPF)
)
tree21 <- trees_2010 %>% filter(PLOT == c(11, 21, 22))
View(trees_2010)
View(tree21)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
ID = Unique.ID(STAND, PLOT),
Vol = KozakTreeVol('IB', SP, DBH, HT, FALSE)*EXPF
)
warnings()
View(trees_2010)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
ID = Unique.ID(STAND, PLOT),
Vol = KozakTreeVol('IB', SP, DBH, HT, FALSE)
)
warnings()
vol <- trees_2010 %>%
mutate(
KozakTreeVol('ib', SP, DBH, HT, FALSE)
)
View(vol)
vol <- trees_2010 %>%
mutate(
VOL1 = KozakTreeVol('ib', SP, DBH, HT, FALSE)
)
View(vol)
View(trees_2010)
vol <- trees_2010 %>%
mutate(
VOL2 = KozakTreeVol('ob', SP, DBH, HT, FALSE)
)
View(trees_2010)
warnings()
bark <- c('ib')
SPP <- trees_2010$SP
DBH <- tress_2010$DBH
HT <- trees_2010$HT
Planted <- c(FALSE)
SPP <- trees_2010$SP
DBH <- tress_2010$DBH
DBH <- trees_2010$DBH
HT <-  trees_2010$HT
Planted <- c(FALSE)
vol3 <- mapply(KozakTreeVol, bark, SPP, DBH, HT, Planted)
View(vol)
trees_2010$vol3 <- mapply(KozakTreeVol, bark, SPP, DBH, HT, Planted)
View(trees_2010)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
ID = Unique.ID(STAND, PLOT),
)
bark <- c('ib')
SPP <- trees_2010$SP
DBH <- trees_2010$DBH
HT <-  trees_2010$HT
Planted <- c(FALSE)
tempvol <- mapply(KozakTreeVol, bark, SPP, DBH, HT, Planted)
trees_2010$vol <- tempvol * trees_2010$EXPF
View(trees_2010)
trees_2010$bark <- c('ib')
View(trees_2010)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
Bark = c('ib'),
Planted = FALSE,
SDI.Plot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDI.Max = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
RD = RD(SDI.Plot, SDI.Max),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
ID = Unique.ID(STAND, PLOT),
Vol2 = KozakTreeVol(Bark, SP, DBH, HT, Planted)
)
View(trees_2010)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
Bark = c('ib'),
Planted = FALSE,
SDIPlot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDIMax = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
ID = Unique.ID(STAND, PLOT),
RD = (SDIPlot/SDIMax)
)
library(inventoryfunctions)
trees <- read_csv('/Users/ryansmith/Thesis/Practice Data/PEF.Inv.Data.for.FVS.TREE.csv')
trees_2010 <- trees %>% filter(YEAR == 2010)
trees_2010 <- trees_2010 %>%
mutate(
DBH = DBH*2.54,
HT = HT*0.3048,
EXPF = EXPF*2.47,
Bark = c('ib'),
Planted = FALSE,
SDIPlot = SDI.Plot(STAND, PLOT, TREE, DBH, EXPF),
SDIMax = SDI.Max(STAND, PLOT, TREE, SP, EXPF),
BA = BA(DBH),
CCF = CrownCompF(STAND, PLOT, TREE, SP, DBH, EXPF),
ID = Unique.ID(STAND, PLOT),
RD = (SDIPlot/SDIMax)
)
View(trees_2010)
library(codetools)
checkUsagePackage("inventoryfunctions", all = TRUE)
BAPH <- function(Stand, Plot, BA, EXPF){
treebasal <- x <- NULL
temp <- tibble(Stand, Plot, BA, EXPF)
temp <- temp %>%
mutate(
treebasal = BA * EXPF
) %>%
select(Stand, Plot, treebasal)
temp <- temp %>%
group_by(Stand, Plot) %>%
mutate(
x = sum(treebasal)
) %>%
select(Stand, Plot, x)
temp$x <- round(temp$x, 2)
return(temp$x)
}
